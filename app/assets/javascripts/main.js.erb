// depend_on_asset "listIndex.html"
// depend_on_asset "listView.html"

Todo = angular.module("Todo", ['ngRoute', 'ngSanitize']);

Todo.directive('ngReallyClick', [function() {
    return {
        restrict: 'A',
        link: function(scope, element, attrs) {
            element.bind('click', function() {
                var message = attrs.ngReallyMessage;
                if (message && confirm(message)) {
                    scope.$apply(attrs.ngReallyClick);
                }
            });
        }
    }
}]);

// Adds appropriate headers to POST/PUT requests
Todo.config(["$httpProvider", function($httpProvider) {
    $httpProvider.defaults.headers.common['X-CSRF-Token'] = document.getElementsByName("csrf-token")[0].content;
    return $httpProvider.defaults.headers.common['Accept'] = "application/json";
  }
]);

// Todo.config(['$routeProvider', function($routeProvider){
//   // Route for '/list'
//   $routeProvider
//     .when('/list/new', { templateUrl: '/assets/createList.html', controller: 'CreateListCtrl' } )
//     .when('/list/:listId', { templateUrl: "/assets/listView.html", controller: 'ListCtrl' } );

//   //  Default
//   $routeProvider.otherwise({ templateUrl: "/assets/listIndex.html", controller: 'ListIndexCtrl' } );
// }]);

// Use in production only for now due to asset hash filepath
Todo.config(['$routeProvider', function($routeProvider){
  // Route for '/list'
  $routeProvider
    .when('/list/new', { templateUrl: '/assets/createList-10eec602766676ec7728f010cb5e9cdc.html', controller: 'CreateListCtrl' } )
    .when('/list/:listId', { templateUrl: "/assets/listView-873ed1e881c3094542fb6b3f9ca67d7a.html", controller: 'ListCtrl' } );

  //  Default
  $routeProvider.otherwise({ templateUrl: "/assets/listIndex-5acba6dc835810d6a6a40e54a408a264.html", controller: 'ListIndexCtrl' } );

}]);